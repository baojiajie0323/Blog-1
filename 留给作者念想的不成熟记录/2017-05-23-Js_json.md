layout: post
categories: JavaScript
title: "JSON的那些事"
tags: [前端,JS]
---
![JS之JSON](http://oltqt8zyb.bkt.clouddn.com/js_json-min.jpg)  

来自W3SCHOOL的解释：  

1. JSON指的是JavaScript对象表示方法(JavaScript Object Notation)。  
2. JSON是轻量级的文本数据交换格式，拥有更快的读写速度。  
3. JSON独立于语言，更容易被理解。  

JSON使用JavaScript语法来描述数据对象，好处是无需任何的解析器，JavaSript程序能够使用内建函数 eval()，将JSON数据转化为JavaScript对象。
<!-- more -->
JSON的语法
-------
- 数据以键值对形式存储
- 数据用逗号分隔
- 花括号保存对象
- 方括号保存数组

### JSON键值对 ###
JSON数据的书写格式是：键值对，包含字段键（在双引号中），后面一个冒号，然后是值。  
```
"name":"aaa"
```
### JSON的值 ###
JSON的值可以是：数字（整数或者浮点数），字符串（在双引号中），bool值，数组（在方括号中），对象（在花括号中），null。  

### JSON对象 ###
JSOON对象在花括号中书写，对象可以包括多个键值对，只意味着可以嵌套。  
```
{"firstName":"aaa","lastName":"bbb"}
```

### JSON数组 ###
JSON数组在方括号中书写，数组中可包含多个对象。
```
{"employees":
	[
		{"firstName": "aaa","lastName": "bbb"},
		{"firstName": "ccc","lastName": "ddd"},
		{"firstName": "eee","lastName": "fff"}
	]
}
```

### JSON使用JavaScript语法 ###
因为JSON使用JavaScript语法，因此我们可以直接使用JavaScript处理JSON。  

通过JavaScript，我们可以创建一个对象数组，并且进行get/set操作。  

**例子：**  
```
var employees=[
	{"firstName": "aaa","lastName": "bbb"},
	{"firstName": "ccc","lastName": "ddd"},
	{"firstName": "eee","lastName": "fff"}
];

//get
employees[0].firstName;

//set
employees[0].lastName="ggg";
```

### JSON文件 ###
1. JSON文件的文件类型是".json"
2. JSON文本的MIME类型是"application/json"

JSON解析成JavaScript
-----------------
从服务器上读取JSON数据之后，我们需要将其转换成JavaScript对象。其中常用的两种方式：  
1. 使用JS的eval()函数，但是有一定的风险，该函数可能会执行脚本
2. 使用JSON解析器，这更加安全。  

### 使用eval()函数 ###
首先创建包含JSON语法的JavaScript字符串：  
```
var text='{ "employees:" : ['+'{ "firstName":"aaa" ,"lastName":"bbb" },'+'{"firstName":"ccc" ,"lastName":"ddd"}'+']}';
```

之后使用eval()函数解析JSON文本，生成JavaScript对象：  
```
var obj=eval("("+text+")");  //注意：必须把JSON文本包含在括号里才能避免语法错误！
```

### 使用JSON解析器 ###
因为JSON解析器更加安全，所以在使用中也常常用到，其使用方法更加简单。  

一如使用eval()函数解析，我们首先也要有JSON语法的输入，之后使用JSON解析器进行转换成JavaScript对象：  
```
var obj=JSON.parse(text);
```