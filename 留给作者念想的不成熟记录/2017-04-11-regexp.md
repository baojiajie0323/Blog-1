---
layout: post
categories: JavaScript
title: "正则表达式"
tags: [正则,编程]
---
我曾近接触过正则表达式，但过去将近一年了，现在可以说已经忘记了。  

那么，这就是一篇由纯种小白到熟悉RegExp的过程介绍。  

这将是一篇很长的、很基础的学习正则表达式的博文。一篇一边学习一边记录过程的低级文章。  
<!-- more -->
前言
--
***这篇文章写的很是糟糕，如果不喜欢，可以转到学习对象的这两篇文章学习！！！***
学习对象：
1. [正则表达式30分钟入门教程](http://deerchao.net/tutorials/regex/regex.htm)，ps：排版奇怪了点
2. [正则表达式-菜鸟教程](http://www.runoob.com/regexp/regexp-syntax.html)  
3. 在线测试：[正则表达式](http://regexr.com/)   

开始学习
--
## 正则表达式是什么？##
正则表达式是由普通字符（例如字符a 到z）以及特殊字符（称为"元字符"）组成的文字模式。 模式描述在搜索文本时要匹配的一个或多个字符串。 正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。（来源：[谷歌解释](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F&*)）  

由此可见，正则表达式就是一个模板，用来匹配自己所需要的字符串！当然，还包括测试、文本替换、文本查询。（详情见：[微软正则文档]: https://msdn.microsoft.com/zh-cn/library/101eysae(v=vs.100).aspx）  
<br />

## 语法 ##
从解释来看，**正则表达式包括普通字符和元字符组成**。那么需要介绍一下这些字符以及优先级，详情可见** [微软正则语法文档]: https://msdn.microsoft.com/zh-cn/library/ae5bf541(v=vs.100).aspx**。  

接下来，是我的复习，大家可以忽略掉，直接转到微软文档进行学习。  

### 常用元字符 ###
| 常用元字符 | 含义 | 例子(默认全局搜索) |
| ------------- |-------------| -------|
| ^ | 匹配搜索字符串的开始位置；如果表达式中有多行标志，还将匹配空格和换行后面的位置；在中括号里，代表对字符集求反 | ^\d{3}：匹配的三个数字(而且这三个数字是字符串的开头)；[^123]：不匹配字符串中的123字符集 |
| $ |  匹配搜索字符串的结束位置；如果表达式中有多行标志，还将匹配空格和换行前面的位置； | \d{3}$: 匹配的三个数字(而且这三个数字是字符串的结尾)|
| \w | 代表任意的字母、数字、下划线 | \w:匹配每一个字母、数字、下划线 |
| \d | 代表任意的数字0-9 | \d:匹配每一个数字 |
| \s | 代表任意的空白字符，包括空白符、制表符、换页符 | \s:匹配每一个空白字符 |
| \b | 代表任意的字边界位置，即字与空格之间的位置 | \bs:匹配每一个前面是空格或者起始位置的字符s |
| \W | 匹配除了字母，数字，下滑线之外的任何字符，等效于[^a-zA-Z0-9_] | \W:匹配除了字母、数字、下划线的每一个字符 |
| \D | 匹配非数字字符 | \D：匹配任意的非数字字符 |
| \S | 匹配任何非空白字符 | \S:匹配任意的非空白字符 |
| \B | 匹配非字边界 | er\B：匹配verb中的“er”，不匹配”never “中的er |
| . | 匹配除了换行符\n之外的任何单一字符 | . ：匹配每一个除了换行符\n之外的任意字符 |
| * | 零次或者多次匹配前面的字符或者子表达式，等效于{0,} | s* (注意有个空格)：匹配这样的字符串“ssssssss ”(s可以是0个也可以是多个) |
| + | 1次或者多次匹配前面的字符或者子表达式，等效于{1,} | s* (注意有个空格)：匹配这样的字符串“ssssssss ”(s可以是1个也可以是多个，因此不会匹配空格) |
| ? | 0次或者1次匹配前面的字符或者子表达式，等效于{0,1} | s* (注意有个空格)：匹配这样的字符串“s ”(s可以是0个也可以最多1个，因此匹配空格，如果有“ssss ”,则只匹配后面的“s ”) |
| {n} | 正好匹配n次，n是非负整数 | s{4}：匹配连续的4个s, "ssss" |
| {n,} | 至少匹配n次，n是非负整数 | s{4,}： 匹配连续的至少4个s, "ssssss"(s的个数>=4) |
| {n,m} | 至少匹配n次，之多匹配m次；n和m是非负整数；n<=m；逗号和数字之间不能有空格 | s{4,5}：匹配连续的至少4个，至多5个s，"ssss"(s的个数至少4个，至多5个，不会匹配"ssssss") |
| () | 标记子表达式的开始和结束，可以保存子表达式以备将来之用 | (hello)\d： 匹配hello后面接着一个数字的字符串 |
| [] | 标记括号表达式的开头和结尾，一般用来表示范围 | [a-z0-9]：匹配每一个从a到z的小写字母和单个数字，从0-9 |
| {} | 一般用来表示重复 | \d{3}：匹配连续的3个数字 |
| &#124; | 在两个或者多个之间进行选择 | [a-z&#124;A-Z&#124;0-9] ：匹配每一个字母(无论大小写)以及每一个数字 |
| \ | 将下一字符标记为特殊字符、文本、反向引用(与小括号有关，详情请见[正则表达式30分钟入门教程](http://deerchao.net/tutorials/regex/regex.htm#lookaround))、或者八进制转义符 | \n :匹配换行符；\\( 匹配"\("；\\\匹配“\” |
| [xyz] | 字符集，与任何一个指定字符集匹配 | [abc]：匹配pblain中的b和a字符 |
| [a-z] | 字符范围，匹配指定范围内的任意字符 | [a-z]：匹配一切小写字母字符 |
| [^xyz] | 反向字符集，不匹配任何一个指定的字符集 | [^abc]：不匹配pblain中的b和a字符，而是匹配p、l、i、n字符 |
| [^a-z] |反向字符范围，不匹配指定范围内的任意字符  | [^a-z]：所有的小写字母字符都不匹配，匹配除小写字母之外的任何字符 |
| (?=exp) | 正预测先行，匹配exp前面的位置 | ^(?=.\*\d).{4,8}$：匹配至少4个最多8个字符且一定含有数字字符(首先的^、$符号代表字符串必须完全符合模式，这个模式分为两本份，**前者是匹配任意长度的除了“\n”的以数字结尾的字符串前面的位置**，第二部分是从那个位置起最少4个最多8个字符) |
| (?!exp) | 负预测先行，匹配后面跟的不是exp的位置 | \b(?!th)\w+\b：匹配一个不以th开头的字符串（首先是空格和字符串的边界，其后不能是“th”，之后是至少一个的字母、数字或者下划线，在之后又是一个边界 |
-------
### 优先级顺序 ###
正则表达式匹配的时候是按照从左到右的书顺序遍历，符合条件的则会从符合条件的子字符串之后再进行匹配。并且遵守优先级顺序。  

下表按照从高到低的顺序展示正则表达式的优先级顺序。  

| 运算符 | 含义 |
| ------------- |-------------|
| \ | 转义符 |
| (),(?=exp),(?!exp),[]| 小括号和中括号 |
| *,+,?,{n},{n,},{n,m} | 限定符 |
| ^,$,\任意元字符 | 定位点和序列**(原谅我不怎么清除序列的意思)** |
| &#124; | 多选一 |

## 一些例子 ##
总要来点例子的，我的想法就是，尽量理解，多做练习，那么就知道自己理解多少了，对提升正则表达式的熟练度也是有好处的。  

点击这里：[正则表达式练习题](http://blog.csdn.net/lcore/article/details/8883092)
1. 非负整数：^\d+$
2. 正整数： ^[1-9][0-9]*$
3. 非正整数(小数|负数|0)： ^(\-|\+)?\d+(\.\d+)?$
4. 负整数：^\-[1-9]\d*$
5. 浮点数：^(\-|\+)?[1-9]?\d+\.\d+$
6. 正浮点数：^[1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*$
7. 负浮点数：^-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*)$
8. 非正浮点数：^(-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*))|0\.0{1,}$
9. 非负浮点数：^\d+(\.\d+)?$

实用性高点的([特殊需求表达式](https://c.runoob.com/front-end/854))：  

只能输入汉字：^[\u4e00-\u9fa5]*$
URL的获取：^(http|https)://(\w+\.){2,}([/\w-?%=])*$
Email地址：^\w+([-+.]\w+)\*@\w+([-.]\w+)\*\.\w+([-.]\w+)\*$
手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$
电话号码(0511-4405222、021-87888822)：\d{3}-\d{8}|\d{4}-\d{7}
密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$
中国邮政编码：[1-9]\d{5}(?!\d) (中国邮政编码为6位数字)
HTML标记的正则表达式：<(\S\*?)[^>]\*>.\*?|<.\*? /> ( 首尾空白字符的正则表达式：^\s\*|\s\*$或(^\s\*)|(\s\*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)  

------

## JavaScript中的正则表达式的介绍 ##
在javascript中正则表达式是通过**RegExp对象**以及**直接量**来实现的，至于对正则表达式的实现主要是借鉴Perl5的正则表达式解析器，下面是一个匹配单词javaScript的正则表达式。  

`var MyRegExp = /javaScript/;`，JS默认的正则表达式是区分大小写的。不过可以通过修饰符来进行修改，修饰符包含**“i、g、m”**。i：指定正则表达式以不区分大小写的模式解析；g：指定正则表达式在第一次匹配完成之后应该继续，也称“全局模式”或“贪婪模式”；m：用于匹配多行。上面的正则表达式如果不区分大小写则是这样的：`var MyRegExp = /javaScript/i;`。  

RegExp对象的属性及方法详情请见：[W3School](http://www.w3school.com.cn/jsref/jsref_obj_regexp.asp)  

下面是我的一个练习，练习重要的几个方法，包括exec以及test。  

exec() 方法用于检索字符串中的正则表达式的匹配。语法：`RegExpObject.exec(string)`。返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。如果 exec() 找到了匹配的文本，则返回一个结果数组。否则，返回 null。此数组的第 0 个元素是与正则表达式相匹配的文本，第 1 个元素是与 RegExpObject 的第 1 个子表达式相匹配的文本（如果有的话），第 2 个元素是与 RegExpObject 的第 2 个子表达式相匹配的文本（如果有的话），以此类推。
```
var myString="http://www.baidu.com";
var myRegexp=/http:\/\/\w+\.(.*)/i;
var result=myRegexp.exec(myString);
alert(result[0]); //返回http://www.baidu.com
alert(result[1]); //返回baidu.com
```

test() 方法用于检测一个字符串是否匹配某个模式。语法：`RegExpObject.test(string);`。如果字符串 string 中含有与 RegExpObject 匹配的文本，则返回 true，否则返回 false。还是上面的例子：
```
var myString="http://www.baidu.com";
var myRegexp=/http:\/\/\w+\.(.*)/i;
var result_t=myRegexp.test(myString);
var result_f=myRegexp.test("asd");
alert(result_t); //返回true
alert(result_f); //返回false
```

至于支持正则表达式的 String 对象的方法，请见[W3School](http://www.w3school.com.cn/jsref/jsref_obj_regexp.asp)。